<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bangunan dan Inventaris Barang</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    * { box-sizing: border-box; font-family: 'Inter', sans-serif; }
    body { background: #f3f4f6; padding: 20px; display: flex; justify-content: center; }
    .container { background: #fff; padding: 2rem; border-radius: 16px; box-shadow: 0 8px 16px rgba(0,0,0,0.05); max-width: 600px; width: 100%; }
    h2, h3 { text-align: center; margin-bottom: 1rem; color: #1f2937; }
    label { display: block; margin: 1rem 0 0.4rem; font-weight: 600; color: #333; }
    input[type="text"], input[type="number"], input[type="file"], select.form-control {
      width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; background: #fff; transition: .2s;
    }
    input:focus, select.form-control:focus {
      border-color: #4f46e5; box-shadow: 0 0 0 2px rgba(79,70,229,.2);
    }
    select.form-control {
      appearance: none;
      background: url("data:image/svg+xml,%3Csvg fill='gray' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E") no-repeat right .75rem center / 1.2rem;
    }
    .preview {margin-top:.5rem;max-height:150px;border-radius:8px;border:1px solid #ccc;object-fit:cover;width:100%;}
    .location-group { display:flex; align-items:center; gap:.5rem; flex-wrap: wrap; }
    .location-group button {
      background:#4f46e5; color:#fff; border:none; border-radius:8px; padding:.6rem .8rem; cursor:pointer; transition:.2s; font-weight:600; display: flex; align-items: center; gap: 0.5rem;
    }
    .location-group button:hover { background:#4338ca; }
    .info-text { font-size:.85rem; color:#555; margin-top:.2rem; }
    button[type="submit"] {
      margin-top:1.5rem; width:100%; padding:.9rem; background:#4f46e5; color:#fff; border:none; border-radius:8px; font-size:1rem; font-weight:600; cursor:pointer; transition:.2s;
    }
    button[type="submit"]:hover { background:#4338ca; }
    #status { margin-top:1rem; font-weight:500; text-align:center; }
    #connectionStatusBox { position:fixed; bottom:16px; right:16px; background:#e5e7eb; color:#111827; font-size:.9rem; padding:.6rem 1rem; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.15); font-weight:600; transition:.3s; }
    #connectionStatusBox.offline { background:#fee2e2; color:#991b1b; }
    #logList { list-style:disc; padding-left:1.2rem; color:#333; }
    #logList li { margin-bottom:1rem; border-bottom:1px dashed #ccc; padding-bottom:.5rem; }
    .fade-toggle { overflow: hidden; transition: max-height 0.4s ease, opacity 0.4s ease; max-height: 1000px; opacity: 1; }
    .fade-toggle.hide { max-height: 0; opacity: 0; padding: 0; margin: 0; pointer-events: none; }
  </style>
</head>
<body>
<div class="container">
  <h2>Bangunan dan Inventaris Barang BPP</h2>
  <h3>Bidang Penyuluhan Kab. Sambas</h3>
  <form id="inventarisForm">
    <label>Nama BPP</label>
    <select name="namaBPP" class="form-control" required>
      <option value="" disabled selected>-- Pilih BPP --</option>
      <option>BPP Selakau</option>
      <option>BPP Selakau Timur</option>
      <option>BPP Salatiga</option>
      <option>BPP Pemangkat</option>
      <option>BPP Semparuk</option>
      <option>BPP Tebas</option>
      <option>BPP Tekarang</option>
      <option>BPP Jawai</option>
      <option>BPP Jawai Selatan</option>
      <option>BPP Sebawi</option>
      <option>BPP Sambas</option>
      <option>BPP Subah</option>
      <option>BPP Sejangkung</option>
      <option>BPP Sajad</option>
      <option>BPP Galing</option>
      <option>BPP Sajingan Besar</option>
      <option>BPP Teluk Keramat</option>
      <option>BPP Tangaran</option>
      <option>BPP Paloh</option>
    </select>

    <label>Kategori</label>
    <select name="kategori" class="form-control" required>
      <option value="" disabled selected>-- Pilih Kategori --</option>
      <option>Bangunan</option>
      <option>Barang</option>
    </select>

    <label>Nama Barang</label>
    <input type="text" name="namaBarang" required />

    <label>Sumber Dana</label>
    <select name="sumberDana" class="form-control" required>
      <option value="" disabled selected>-- Pilih Sumber Dana --</option>
      <option>APBN</option><option>APBD</option><option>FEATI</option><option>READSI</option><option>IPDMIP</option><option>Lainnya</option>
    </select>

    <label>Tahun</label>
    <input type="number" name="tahunRilis" placeholder="Saat Barang Diterima" required />

    <label>Kondisi Barang</label>
    <input type="text" name="kondisiBarang" placeholder="Baik / Rusak Ringan / Rusak Berat" required />

    <label>Titik Koordinat</label>
    <div class="location-group">
      <input type="text" name="titikKoordinat" id="titikKoordinat" required />
      <button type="button" onclick="getLocation()"><i class="fas fa-location-dot"></i> Ambil Lokasi</button>
    </div>
    <small class="info-text"><i class="fas fa-info-circle"></i> Klik tombol untuk ambil lokasi otomatis</small>

    <label>Tampak Depan</label>
    <div class="location-group">
      <input type="file" id="fileDepanKamera" accept="image/*" capture="environment" style="display:none" onchange="previewImage(this,'previewDepan')" />
      <input type="file" id="fileDepanGaleri" accept="image/*" style="display:none" onchange="previewImage(this,'previewDepan')" />
      <button type="button" onclick="document.getElementById('fileDepanKamera').click()"><i class="fas fa-camera"></i> Ambil Foto</button>
      <button type="button" onclick="document.getElementById('fileDepanGaleri').click()"><i class="fas fa-folder-open"></i> Dari Galeri</button>
    </div>
    <img id="previewDepan" class="preview" />

    <label>Tampak Samping</label>
    <div class="location-group">
      <input type="file" id="fileSampingKamera" accept="image/*" capture="environment" style="display:none" onchange="previewImage(this,'previewSamping')" />
      <input type="file" id="fileSampingGaleri" accept="image/*" style="display:none" onchange="previewImage(this,'previewSamping')" />
      <button type="button" onclick="document.getElementById('fileSampingKamera').click()"><i class="fas fa-camera"></i> Ambil Foto</button>
      <button type="button" onclick="document.getElementById('fileSampingGaleri').click()"><i class="fas fa-folder-open"></i> Dari Galeri</button>
    </div>
    <img id="previewSamping" class="preview" />

    <div id="bagianBelakang" class="fade-toggle">
      <label>Tampak Belakang</label>
      <div class="location-group">
        <input type="file" id="fileBelakangKamera" accept="image/*" capture="environment" style="display:none" onchange="previewImage(this,'previewBelakang')" />
        <input type="file" id="fileBelakangGaleri" accept="image/*" style="display:none" onchange="previewImage(this,'previewBelakang')" />
        <button type="button" onclick="document.getElementById('fileBelakangKamera').click()"><i class="fas fa-camera"></i> Ambil Foto</button>
        <button type="button" onclick="document.getElementById('fileBelakangGaleri').click()"><i class="fas fa-folder-open"></i> Dari Galeri</button>
      </div>
      <img id="previewBelakang" class="preview" />
    </div>

    <button type="submit"><i class="fas fa-save"></i> Simpan Data</button>
  </form>

  <p id="status"></p>

  <div id="logAktivitas">
    <h3><i class="fas fa-clock"></i> Riwayat Input</h3>
    <button id="btnReloadRiwayat" type="button"><i class="fas fa-sync-alt"></i> Reload Riwayat</button>
    <ul id="logList"></ul>
  </div>
</div>
<div id="connectionStatusBox"><i class="fas fa-wifi"></i> Online</div>
<!-- Script tetap, gunakan yang sudah kamu punya -->
</body>
</html>
